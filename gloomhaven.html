<!DOCTYPE html>
<html>
<meta charset="utf-8">
<script src="https://d3js.org/d3.v2.min.js?2.9.3"></script>
<style>

.link {
  stroke: #aaa;
}

.node text {
stroke:#333;
cursos:pointer;
}

.node circle{
stroke:#fff;
stroke-width:3px;
fill:#555;
}

</style>
<body>
<script>

<!-- Colors: 1 complete, 2 pending, 3 blocked -->

var width = 960,
    height = 500

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var force = d3.layout.force()
    .gravity(.05)
    .distance(100)
    .charge(-100)
    .size([width, height]);

d3.json("graphFile.json", function(json) {
  force
      .nodes(json.nodes)
      .links(json.links)
      .start();

  var link = svg.selectAll(".link")
      .data(json.links)
    .enter().append("line")
      .attr("class", "link")
    .style("stroke-width", function(d) { return Math.sqrt(d.weight); });

  var node = svg.selectAll(".node")
      .data(json.nodes)
    .enter().append("g")
      .attr("class", "node")
      .call(force.drag);

  var colors = ["#00FF00", "#FFD700", "#FF0000"]
  node.append("circle")
      .style("fill", function(d){
            return colors[d.color - 1];
          })
      .attr("r","5");

  node.append("text")
      .attr("dx", 12)
      .attr("dy", ".35em")
      .text(function(d) { return d.name });

  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
  });
});

</script>

<p>The story so far:</p>
<ul>
<li>1: while killing some bandits, we discovered that they were teaming up with the undead</li>
<li>2: we recovered a map and a scroll from a crypt following Jekshera's instructions</li>
<li>3: following Jekshera's instructions we murdered a band of Inox who supposedly were bandits. She gave as another mission (to steal a diamond from a mine)</li>
<li>93: looking for a treasure in an island we had to face a group of Lurkers</li>
<li>4: we used the map recovered in (2) to investigate what's the Gloom the bandits were talking about. After discovering a ritual, we got more clues on locations to investigate about these events.</li>
<li>70: we helped to destroy the spirits terrorising and island.</li>
<li>5: we destroyed the cultits' base of operations and came accross an open rift</li>
<li>65: we found schematics for an ancient technology inside a sulfur mine</li>
<li>8: we discovered at Jekshera's warehouse that she was using the scroll we recovered in (2) to raise the dead. We killed her bodyguards, but she escaped and promised to return with an army of undead</li>
<li>10: we entered the rift and were asked by a demon to do a mission for him</li>
<li>21: instead, we killed the demon</li>
<li>14: we obtained an orb for Hail the enchanter. As a reward she provided us with some options to keep finding out Jekshera's location. She will help us from now on. </li>
<li>13: we explored the temple of the seer and obtained information about the location of Jekshera</li>
</ul>
<p>Open options:</p>
<ul>
<li>6: we can investigate what was causing trouble to the cultist which ritual we destroyed</li>
<li>22: nothing prevents us to do what the demon we willed in 10 to do</li>
<li>76: side quest</li>
<li>20: according to the seer (scenario 13) this is Jekshera's current location</li>
<li>19: we can ask Hail to help us close the rift opened by the cultists in scenario 5</li>
<li>7: we can help Hail to obtain an ingredient to help us find Jekshera (but we already got the location after finishing scenario 13 - the location is scenario 20)</li>
</ul>
</body>
</html>
